{"ast":null,"code":"/*!\n * connect\n * Copyright(c) 2010 Sencha Inc.\n * Copyright(c) 2011 TJ Holowaychuk\n * Copyright(c) 2015 Douglas Christopher Wilson\n * MIT Licensed\n */\n'use strict';\n/**\n * Module dependencies.\n * @private\n */\n\nvar debug = require('debug')('connect:dispatcher');\n\nvar EventEmitter = require('events').EventEmitter;\n\nvar finalhandler = require('finalhandler');\n\nvar http = require('http');\n\nvar merge = require('utils-merge');\n\nvar parseUrl = require('parseurl');\n/**\n * Module exports.\n * @public\n */\n\n\nmodule.exports = createServer;\n/**\n * Module variables.\n * @private\n */\n\nvar env = process.env.NODE_ENV || 'development';\nvar proto = {};\n/* istanbul ignore next */\n\nvar defer = typeof setImmediate === 'function' ? setImmediate : function (fn) {\n  process.nextTick(fn.bind.apply(fn, arguments));\n};\n/**\n * Create a new connect server.\n *\n * @return {function}\n * @public\n */\n\nfunction createServer() {\n  function app(req, res, next) {\n    app.handle(req, res, next);\n  }\n\n  merge(app, proto);\n  merge(app, EventEmitter.prototype);\n  app.route = '/';\n  app.stack = [];\n  return app;\n}\n/**\n * Utilize the given middleware `handle` to the given `route`,\n * defaulting to _/_. This \"route\" is the mount-point for the\n * middleware, when given a value other than _/_ the middleware\n * is only effective when that segment is present in the request's\n * pathname.\n *\n * For example if we were to mount a function at _/admin_, it would\n * be invoked on _/admin_, and _/admin/settings_, however it would\n * not be invoked for _/_, or _/posts_.\n *\n * @param {String|Function|Server} route, callback or server\n * @param {Function|Server} callback or server\n * @return {Server} for chaining\n * @public\n */\n\n\nproto.use = function use(route, fn) {\n  var handle = fn;\n  var path = route; // default route to '/'\n\n  if (typeof route !== 'string') {\n    handle = route;\n    path = '/';\n  } // wrap sub-apps\n\n\n  if (typeof handle.handle === 'function') {\n    var server = handle;\n    server.route = path;\n\n    handle = function (req, res, next) {\n      server.handle(req, res, next);\n    };\n  } // wrap vanilla http.Servers\n\n\n  if (handle instanceof http.Server) {\n    handle = handle.listeners('request')[0];\n  } // strip trailing slash\n\n\n  if (path[path.length - 1] === '/') {\n    path = path.slice(0, -1);\n  } // add the middleware\n\n\n  debug('use %s %s', path || '/', handle.name || 'anonymous');\n  this.stack.push({\n    route: path,\n    handle: handle\n  });\n  return this;\n};\n/**\n * Handle server requests, punting them down\n * the middleware stack.\n *\n * @private\n */\n\n\nproto.handle = function handle(req, res, out) {\n  var index = 0;\n  var protohost = getProtohost(req.url) || '';\n  var removed = '';\n  var slashAdded = false;\n  var stack = this.stack; // final function handler\n\n  var done = out || finalhandler(req, res, {\n    env: env,\n    onerror: logerror\n  }); // store the original URL\n\n  req.originalUrl = req.originalUrl || req.url;\n\n  function next(err) {\n    if (slashAdded) {\n      req.url = req.url.substr(1);\n      slashAdded = false;\n    }\n\n    if (removed.length !== 0) {\n      req.url = protohost + removed + req.url.substr(protohost.length);\n      removed = '';\n    } // next callback\n\n\n    var layer = stack[index++]; // all done\n\n    if (!layer) {\n      defer(done, err);\n      return;\n    } // route data\n\n\n    var path = parseUrl(req).pathname || '/';\n    var route = layer.route; // skip this layer if the route doesn't match\n\n    if (path.toLowerCase().substr(0, route.length) !== route.toLowerCase()) {\n      return next(err);\n    } // skip if route match does not border \"/\", \".\", or end\n\n\n    var c = path.length > route.length && path[route.length];\n\n    if (c && c !== '/' && c !== '.') {\n      return next(err);\n    } // trim off the part of the url that matches the route\n\n\n    if (route.length !== 0 && route !== '/') {\n      removed = route;\n      req.url = protohost + req.url.substr(protohost.length + removed.length); // ensure leading slash\n\n      if (!protohost && req.url[0] !== '/') {\n        req.url = '/' + req.url;\n        slashAdded = true;\n      }\n    } // call the layer handle\n\n\n    call(layer.handle, route, err, req, res, next);\n  }\n\n  next();\n};\n/**\n * Listen for connections.\n *\n * This method takes the same arguments\n * as node's `http.Server#listen()`.\n *\n * HTTP and HTTPS:\n *\n * If you run your application both as HTTP\n * and HTTPS you may wrap them individually,\n * since your Connect \"server\" is really just\n * a JavaScript `Function`.\n *\n *      var connect = require('connect')\n *        , http = require('http')\n *        , https = require('https');\n *\n *      var app = connect();\n *\n *      http.createServer(app).listen(80);\n *      https.createServer(options, app).listen(443);\n *\n * @return {http.Server}\n * @api public\n */\n\n\nproto.listen = function listen() {\n  var server = http.createServer(this);\n  return server.listen.apply(server, arguments);\n};\n/**\n * Invoke a route handle.\n * @private\n */\n\n\nfunction call(handle, route, err, req, res, next) {\n  var arity = handle.length;\n  var error = err;\n  var hasError = Boolean(err);\n  debug('%s %s : %s', handle.name || '<anonymous>', route, req.originalUrl);\n\n  try {\n    if (hasError && arity === 4) {\n      // error-handling middleware\n      handle(err, req, res, next);\n      return;\n    } else if (!hasError && arity < 4) {\n      // request-handling middleware\n      handle(req, res, next);\n      return;\n    }\n  } catch (e) {\n    // replace the error\n    error = e;\n  } // continue\n\n\n  next(error);\n}\n/**\n * Log error using console.error.\n *\n * @param {Error} err\n * @private\n */\n\n\nfunction logerror(err) {\n  if (env !== 'test') console.error(err.stack || err.toString());\n}\n/**\n * Get get protocol + host for a URL.\n *\n * @param {string} url\n * @private\n */\n\n\nfunction getProtohost(url) {\n  if (url.length === 0 || url[0] === '/') {\n    return undefined;\n  }\n\n  var searchIndex = url.indexOf('?');\n  var pathLength = searchIndex !== -1 ? searchIndex : url.length;\n  var fqdnIndex = url.substr(0, pathLength).indexOf('://');\n  return fqdnIndex !== -1 ? url.substr(0, url.indexOf('/', 3 + fqdnIndex)) : undefined;\n}","map":{"version":3,"names":["debug","require","EventEmitter","finalhandler","http","merge","parseUrl","module","exports","createServer","env","process","NODE_ENV","proto","defer","setImmediate","fn","nextTick","bind","apply","arguments","app","req","res","next","handle","prototype","route","stack","use","path","server","Server","listeners","length","slice","name","push","out","index","protohost","getProtohost","url","removed","slashAdded","done","onerror","logerror","originalUrl","err","substr","layer","pathname","toLowerCase","c","call","listen","arity","error","hasError","Boolean","e","console","toString","undefined","searchIndex","indexOf","pathLength","fqdnIndex"],"sources":["/Users/johnberetty/node_modules/connect/index.js"],"sourcesContent":["/*!\n * connect\n * Copyright(c) 2010 Sencha Inc.\n * Copyright(c) 2011 TJ Holowaychuk\n * Copyright(c) 2015 Douglas Christopher Wilson\n * MIT Licensed\n */\n\n'use strict';\n\n/**\n * Module dependencies.\n * @private\n */\n\nvar debug = require('debug')('connect:dispatcher');\nvar EventEmitter = require('events').EventEmitter;\nvar finalhandler = require('finalhandler');\nvar http = require('http');\nvar merge = require('utils-merge');\nvar parseUrl = require('parseurl');\n\n/**\n * Module exports.\n * @public\n */\n\nmodule.exports = createServer;\n\n/**\n * Module variables.\n * @private\n */\n\nvar env = process.env.NODE_ENV || 'development';\nvar proto = {};\n\n/* istanbul ignore next */\nvar defer = typeof setImmediate === 'function'\n  ? setImmediate\n  : function(fn){ process.nextTick(fn.bind.apply(fn, arguments)) }\n\n/**\n * Create a new connect server.\n *\n * @return {function}\n * @public\n */\n\nfunction createServer() {\n  function app(req, res, next){ app.handle(req, res, next); }\n  merge(app, proto);\n  merge(app, EventEmitter.prototype);\n  app.route = '/';\n  app.stack = [];\n  return app;\n}\n\n/**\n * Utilize the given middleware `handle` to the given `route`,\n * defaulting to _/_. This \"route\" is the mount-point for the\n * middleware, when given a value other than _/_ the middleware\n * is only effective when that segment is present in the request's\n * pathname.\n *\n * For example if we were to mount a function at _/admin_, it would\n * be invoked on _/admin_, and _/admin/settings_, however it would\n * not be invoked for _/_, or _/posts_.\n *\n * @param {String|Function|Server} route, callback or server\n * @param {Function|Server} callback or server\n * @return {Server} for chaining\n * @public\n */\n\nproto.use = function use(route, fn) {\n  var handle = fn;\n  var path = route;\n\n  // default route to '/'\n  if (typeof route !== 'string') {\n    handle = route;\n    path = '/';\n  }\n\n  // wrap sub-apps\n  if (typeof handle.handle === 'function') {\n    var server = handle;\n    server.route = path;\n    handle = function (req, res, next) {\n      server.handle(req, res, next);\n    };\n  }\n\n  // wrap vanilla http.Servers\n  if (handle instanceof http.Server) {\n    handle = handle.listeners('request')[0];\n  }\n\n  // strip trailing slash\n  if (path[path.length - 1] === '/') {\n    path = path.slice(0, -1);\n  }\n\n  // add the middleware\n  debug('use %s %s', path || '/', handle.name || 'anonymous');\n  this.stack.push({ route: path, handle: handle });\n\n  return this;\n};\n\n/**\n * Handle server requests, punting them down\n * the middleware stack.\n *\n * @private\n */\n\nproto.handle = function handle(req, res, out) {\n  var index = 0;\n  var protohost = getProtohost(req.url) || '';\n  var removed = '';\n  var slashAdded = false;\n  var stack = this.stack;\n\n  // final function handler\n  var done = out || finalhandler(req, res, {\n    env: env,\n    onerror: logerror\n  });\n\n  // store the original URL\n  req.originalUrl = req.originalUrl || req.url;\n\n  function next(err) {\n    if (slashAdded) {\n      req.url = req.url.substr(1);\n      slashAdded = false;\n    }\n\n    if (removed.length !== 0) {\n      req.url = protohost + removed + req.url.substr(protohost.length);\n      removed = '';\n    }\n\n    // next callback\n    var layer = stack[index++];\n\n    // all done\n    if (!layer) {\n      defer(done, err);\n      return;\n    }\n\n    // route data\n    var path = parseUrl(req).pathname || '/';\n    var route = layer.route;\n\n    // skip this layer if the route doesn't match\n    if (path.toLowerCase().substr(0, route.length) !== route.toLowerCase()) {\n      return next(err);\n    }\n\n    // skip if route match does not border \"/\", \".\", or end\n    var c = path.length > route.length && path[route.length];\n    if (c && c !== '/' && c !== '.') {\n      return next(err);\n    }\n\n    // trim off the part of the url that matches the route\n    if (route.length !== 0 && route !== '/') {\n      removed = route;\n      req.url = protohost + req.url.substr(protohost.length + removed.length);\n\n      // ensure leading slash\n      if (!protohost && req.url[0] !== '/') {\n        req.url = '/' + req.url;\n        slashAdded = true;\n      }\n    }\n\n    // call the layer handle\n    call(layer.handle, route, err, req, res, next);\n  }\n\n  next();\n};\n\n/**\n * Listen for connections.\n *\n * This method takes the same arguments\n * as node's `http.Server#listen()`.\n *\n * HTTP and HTTPS:\n *\n * If you run your application both as HTTP\n * and HTTPS you may wrap them individually,\n * since your Connect \"server\" is really just\n * a JavaScript `Function`.\n *\n *      var connect = require('connect')\n *        , http = require('http')\n *        , https = require('https');\n *\n *      var app = connect();\n *\n *      http.createServer(app).listen(80);\n *      https.createServer(options, app).listen(443);\n *\n * @return {http.Server}\n * @api public\n */\n\nproto.listen = function listen() {\n  var server = http.createServer(this);\n  return server.listen.apply(server, arguments);\n};\n\n/**\n * Invoke a route handle.\n * @private\n */\n\nfunction call(handle, route, err, req, res, next) {\n  var arity = handle.length;\n  var error = err;\n  var hasError = Boolean(err);\n\n  debug('%s %s : %s', handle.name || '<anonymous>', route, req.originalUrl);\n\n  try {\n    if (hasError && arity === 4) {\n      // error-handling middleware\n      handle(err, req, res, next);\n      return;\n    } else if (!hasError && arity < 4) {\n      // request-handling middleware\n      handle(req, res, next);\n      return;\n    }\n  } catch (e) {\n    // replace the error\n    error = e;\n  }\n\n  // continue\n  next(error);\n}\n\n/**\n * Log error using console.error.\n *\n * @param {Error} err\n * @private\n */\n\nfunction logerror(err) {\n  if (env !== 'test') console.error(err.stack || err.toString());\n}\n\n/**\n * Get get protocol + host for a URL.\n *\n * @param {string} url\n * @private\n */\n\nfunction getProtohost(url) {\n  if (url.length === 0 || url[0] === '/') {\n    return undefined;\n  }\n\n  var searchIndex = url.indexOf('?');\n  var pathLength = searchIndex !== -1\n    ? searchIndex\n    : url.length;\n  var fqdnIndex = url.substr(0, pathLength).indexOf('://');\n\n  return fqdnIndex !== -1\n    ? url.substr(0, url.indexOf('/', 3 + fqdnIndex))\n    : undefined;\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}