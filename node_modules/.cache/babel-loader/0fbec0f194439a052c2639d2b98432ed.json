{"ast":null,"code":"var fs = require(\"fs\");\n\nvar path = require(\"path\");\n\nvar config = require(\"./config\");\n\nvar eachSeries = require(\"async-each-series\");\n\nvar asyncTasks = require(\"./async-tasks\");\n\nvar hooks = require(\"./hooks\");\n\nvar merge = require(\"./opts\").merge;\n\nvar defaultPlugins = {\n  \"sync-options\": require(\"./plugins/sync-options/sync-options.plugin\"),\n  \"overview\": require(\"./plugins/overview/overview.plugin\"),\n  \"history\": require(\"./plugins/history/history.plugin\"),\n  \"plugins\": require(\"./plugins/plugins/plugins.plugin\"),\n  \"remote-debug\": require(\"./plugins/remote-debug/remote-debug.plugin\"),\n  \"help\": require(\"./plugins/help/help.plugin\"),\n  \"connections\": require(\"./plugins/connections/connections.plugin\"),\n  \"network-throttle\": require(\"./plugins/network-throttle/network-throttle.plugin\")\n};\n/**\n * @param {Object} opts - Any options specifically\n *                        passed to the control panel\n * @param {BrowserSync} bs\n * @param {EventEmitter} emitter\n * @constructor\n * @returns {UI}\n */\n\nvar UI = function (opts, bs, emitter) {\n  var ui = this;\n  ui.bs = bs;\n  ui.config = config.merge();\n  ui.events = emitter;\n  ui.options = merge(opts);\n  ui.logger = bs.getLogger(ui.config.get(\"pluginName\"));\n  ui.defaultPlugins = defaultPlugins;\n  ui.listeners = {};\n  ui.clients = bs.io.of(bs.options.getIn([\"socket\", \"namespace\"]));\n  ui.socket = bs.io.of(ui.config.getIn([\"socket\", \"namespace\"]));\n\n  if (ui.options.get(\"logLevel\")) {\n    ui.logger.setLevel(ui.options.get(\"logLevel\"));\n  }\n  /**\n   *\n   */\n\n\n  ui.pluginManager = new bs.utils.easyExtender(defaultPlugins, hooks).init();\n  /**\n   * Transform/save data RE: plugins\n   * @type {*}\n   */\n\n  ui.bsPlugins = require(\"./resolve-plugins\")(bs.getUserPlugins());\n  return ui;\n};\n/**\n * Detect an available port\n * @returns {UI}\n */\n\n\nUI.prototype.init = function () {\n  var ui = this;\n  eachSeries(asyncTasks, taskRunner(ui), tasksComplete(ui));\n  return this;\n};\n/**\n * @param cb\n */\n\n\nUI.prototype.getServer = function (cb) {\n  var ui = this;\n\n  if (ui.server) {\n    return ui.server;\n  }\n\n  this.events.on(\"ui:running\", function () {\n    cb(null, ui.server);\n  });\n};\n/**\n * @returns {Array}\n */\n\n\nUI.prototype.getInitialTemplates = function () {\n  var prefix = path.resolve(__dirname, \"../templates/directives\");\n  return fs.readdirSync(prefix).map(function (name) {\n    return path.resolve(prefix, name);\n  });\n};\n/**\n * @param event\n */\n\n\nUI.prototype.delegateEvent = function (event) {\n  var ui = this;\n  var listeners = ui.listeners[event.namespace];\n\n  if (listeners) {\n    if (listeners.event) {\n      listeners.event.call(ui, event);\n    } else {\n      if (event.event && listeners[event.event]) {\n        listeners[event.event].call(ui, event.data);\n      }\n    }\n  }\n};\n/**\n * @param cb\n */\n\n\nUI.prototype.listen = function (ns, events) {\n  var ui = this;\n\n  if (Array.isArray(ns)) {\n    ns = ns.join(\":\");\n  }\n\n  if (!ui.listeners[ns]) {\n    ui.listeners[ns] = events;\n  }\n};\n/**\n * @param name\n * @param value\n * @returns {Map|*}\n */\n\n\nUI.prototype.setOption = function (name, value) {\n  var ui = this;\n  ui.options = ui.options.set(name, value);\n  return ui.options;\n};\n/**\n * @param path\n * @param value\n * @returns {Map|*}\n */\n\n\nUI.prototype.setOptionIn = function (path, value) {\n  this.options = this.options.setIn(path, value);\n  return this.options;\n};\n/**\n * @param fn\n */\n\n\nUI.prototype.setMany = function (fn) {\n  this.options = this.options.withMutations(fn);\n  return this.options;\n};\n/**\n * @param path\n * @returns {any|*}\n */\n\n\nUI.prototype.getOptionIn = function (path) {\n  return this.options.getIn(path);\n};\n/**\n * Run each setup task in sequence\n * @param ui\n * @returns {Function}\n */\n\n\nfunction taskRunner(ui) {\n  return function (item, cb) {\n    ui.logger.debug(\"Starting Step: \" + item.step);\n    /**\n     * Give each step access to the UI Instance\n     */\n\n    item.fn(ui, function (err, out) {\n      if (err) {\n        return cb(err);\n      }\n\n      if (out) {\n        handleOut(ui, out);\n      }\n\n      ui.logger.debug(\"{green:Step Complete: \" + item.step);\n      cb();\n    });\n  };\n}\n/**\n * Setup tasks may return options or instance properties to be set\n * @param {UI} ui\n * @param {Object} out\n */\n\n\nfunction handleOut(ui, out) {\n  if (out.options) {\n    Object.keys(out.options).forEach(function (key) {\n      ui.options = ui.options.set(key, out.options[key]);\n    });\n  }\n\n  if (out.optionsIn) {\n    out.optionsIn.forEach(function (item) {\n      ui.options = ui.options.setIn(item.path, item.value);\n    });\n  }\n\n  if (out.instance) {\n    Object.keys(out.instance).forEach(function (key) {\n      ui[key] = out.instance[key];\n    });\n  }\n}\n/**\n * All async tasks complete at this point\n * @param ui\n */\n\n\nfunction tasksComplete(ui) {\n  return function (err) {\n    /**\n     * Log any error according to BrowserSync's Logging level\n     */\n    if (err) {\n      ui.logger.setOnce(\"useLevelPrefixes\", true).error(err.message || err);\n    }\n    /**\n     * Running event\n     */\n\n\n    ui.events.emit(\"ui:running\", {\n      instance: ui,\n      options: ui.options\n    });\n    /**\n     * Finally call the user-provided callback\n     */\n\n    ui.cb(null, ui);\n  };\n}\n\nmodule.exports = UI;","map":{"version":3,"names":["fs","require","path","config","eachSeries","asyncTasks","hooks","merge","defaultPlugins","UI","opts","bs","emitter","ui","events","options","logger","getLogger","get","listeners","clients","io","of","getIn","socket","setLevel","pluginManager","utils","easyExtender","init","bsPlugins","getUserPlugins","prototype","taskRunner","tasksComplete","getServer","cb","server","on","getInitialTemplates","prefix","resolve","__dirname","readdirSync","map","name","delegateEvent","event","namespace","call","data","listen","ns","Array","isArray","join","setOption","value","set","setOptionIn","setIn","setMany","fn","withMutations","getOptionIn","item","debug","step","err","out","handleOut","Object","keys","forEach","key","optionsIn","instance","setOnce","error","message","emit","module","exports"],"sources":["/Users/johnberetty/node_modules/browser-sync-ui/lib/UI.js"],"sourcesContent":["var fs          = require(\"fs\");\nvar path        = require(\"path\");\n\nvar config      = require(\"./config\");\nvar eachSeries  = require(\"async-each-series\");\nvar asyncTasks  = require(\"./async-tasks\");\nvar hooks       = require(\"./hooks\");\nvar merge       = require(\"./opts\").merge;\n\nvar defaultPlugins = {\n    \"sync-options\":     require(\"./plugins/sync-options/sync-options.plugin\"),\n    \"overview\":         require(\"./plugins/overview/overview.plugin\"),\n    \"history\":          require(\"./plugins/history/history.plugin\"),\n    \"plugins\":          require(\"./plugins/plugins/plugins.plugin\"),\n    \"remote-debug\":     require(\"./plugins/remote-debug/remote-debug.plugin\"),\n    \"help\":             require(\"./plugins/help/help.plugin\"),\n    \"connections\":      require(\"./plugins/connections/connections.plugin\"),\n    \"network-throttle\": require(\"./plugins/network-throttle/network-throttle.plugin\")\n};\n\n/**\n * @param {Object} opts - Any options specifically\n *                        passed to the control panel\n * @param {BrowserSync} bs\n * @param {EventEmitter} emitter\n * @constructor\n * @returns {UI}\n */\nvar UI = function (opts, bs, emitter) {\n\n    var ui            = this;\n    ui.bs             = bs;\n    ui.config         = config.merge();\n    ui.events         = emitter;\n    ui.options        = merge(opts);\n    ui.logger         = bs.getLogger(ui.config.get(\"pluginName\"));\n    ui.defaultPlugins = defaultPlugins;\n    ui.listeners      = {};\n    ui.clients        = bs.io.of(bs.options.getIn([\"socket\", \"namespace\"]));\n    ui.socket         = bs.io.of(ui.config.getIn([\"socket\", \"namespace\"]));\n\n    if (ui.options.get(\"logLevel\")) {\n        ui.logger.setLevel(ui.options.get(\"logLevel\"));\n    }\n\n    /**\n     *\n     */\n    ui.pluginManager = new bs.utils.easyExtender(defaultPlugins, hooks).init();\n\n    /**\n     * Transform/save data RE: plugins\n     * @type {*}\n     */\n    ui.bsPlugins = require(\"./resolve-plugins\")(bs.getUserPlugins());\n\n    return ui;\n};\n\n/**\n * Detect an available port\n * @returns {UI}\n */\nUI.prototype.init = function () {\n\n    var ui = this;\n\n    eachSeries(\n        asyncTasks,\n        taskRunner(ui),\n        tasksComplete(ui)\n    );\n\n    return this;\n};\n\n/**\n * @param cb\n */\nUI.prototype.getServer = function (cb) {\n    var ui = this;\n    if (ui.server) {\n        return ui.server;\n    }\n    this.events.on(\"ui:running\", function () {\n        cb(null, ui.server);\n    });\n};\n\n/**\n * @returns {Array}\n */\nUI.prototype.getInitialTemplates = function () {\n    var prefix = path.resolve(__dirname, \"../templates/directives\");\n    return fs.readdirSync(prefix)\n        .map(function (name) {\n            return path.resolve(prefix, name);\n        });\n};\n\n/**\n * @param event\n */\nUI.prototype.delegateEvent = function (event) {\n\n    var ui = this;\n    var listeners = ui.listeners[event.namespace];\n\n    if (listeners) {\n        if (listeners.event) {\n            listeners.event.call(ui, event);\n        } else {\n            if (event.event && listeners[event.event]) {\n                listeners[event.event].call(ui, event.data);\n            }\n        }\n    }\n};\n\n/**\n * @param cb\n */\nUI.prototype.listen = function (ns, events) {\n    var ui = this;\n    if (Array.isArray(ns)) {\n        ns = ns.join(\":\");\n    }\n    if (!ui.listeners[ns]) {\n        ui.listeners[ns] = events;\n    }\n};\n\n/**\n * @param name\n * @param value\n * @returns {Map|*}\n */\nUI.prototype.setOption = function (name, value) {\n    var ui     = this;\n    ui.options = ui.options.set(name, value);\n    return ui.options;\n};\n\n/**\n * @param path\n * @param value\n * @returns {Map|*}\n */\nUI.prototype.setOptionIn = function (path, value) {\n    this.options = this.options.setIn(path, value);\n    return this.options;\n};\n\n/**\n * @param fn\n */\nUI.prototype.setMany = function (fn) {\n    this.options = this.options.withMutations(fn);\n    return this.options;\n};\n\n/**\n * @param path\n * @returns {any|*}\n */\nUI.prototype.getOptionIn = function (path) {\n    return this.options.getIn(path);\n};\n\n/**\n * Run each setup task in sequence\n * @param ui\n * @returns {Function}\n */\nfunction taskRunner (ui) {\n\n    return function (item, cb) {\n\n        ui.logger.debug(\"Starting Step: \" + item.step);\n\n        /**\n         * Give each step access to the UI Instance\n         */\n        item.fn(ui, function (err, out) {\n            if (err) {\n                return cb(err);\n            }\n            if (out) {\n                handleOut(ui, out);\n            }\n            ui.logger.debug(\"{green:Step Complete: \" + item.step);\n            cb();\n        });\n    };\n}\n\n/**\n * Setup tasks may return options or instance properties to be set\n * @param {UI} ui\n * @param {Object} out\n */\nfunction handleOut (ui, out) {\n\n    if (out.options) {\n        Object.keys(out.options).forEach(function (key) {\n            ui.options = ui.options.set(key, out.options[key]);\n        });\n    }\n\n    if (out.optionsIn) {\n        out.optionsIn.forEach(function (item) {\n            ui.options = ui.options.setIn(item.path, item.value);\n        });\n    }\n\n    if (out.instance) {\n        Object.keys(out.instance).forEach(function (key) {\n            ui[key] = out.instance[key];\n        });\n    }\n}\n\n/**\n * All async tasks complete at this point\n * @param ui\n */\nfunction tasksComplete (ui) {\n\n    return function (err) {\n\n        /**\n         * Log any error according to BrowserSync's Logging level\n         */\n        if (err) {\n            ui.logger.setOnce(\"useLevelPrefixes\", true).error(err.message || err);\n        }\n\n        /**\n         * Running event\n         */\n        ui.events.emit(\"ui:running\", {instance: ui, options: ui.options});\n\n        /**\n         * Finally call the user-provided callback\n         */\n        ui.cb(null, ui);\n    };\n}\n\nmodule.exports = UI;"],"mappings":"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"},"metadata":{},"sourceType":"script"}