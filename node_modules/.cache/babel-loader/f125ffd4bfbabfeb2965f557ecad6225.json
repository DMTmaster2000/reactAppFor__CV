{"ast":null,"code":"const {\n  Transform\n} = require('stream');\n\nclass HeaderHostTransformer extends Transform {\n  constructor() {\n    let opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    super(opts);\n    this.host = opts.host || 'localhost';\n    this.replaced = false;\n  }\n\n  _transform(data, encoding, callback) {\n    callback(null, this.replaced // after replacing the first instance of the Host header we just become a regular passthrough\n    ? data : data.toString().replace(/(\\r\\n[Hh]ost: )\\S+/, (match, $1) => {\n      this.replaced = true;\n      return $1 + this.host;\n    }));\n  }\n\n}\n\nmodule.exports = HeaderHostTransformer;","map":{"version":3,"names":["Transform","require","HeaderHostTransformer","constructor","opts","host","replaced","_transform","data","encoding","callback","toString","replace","match","$1","module","exports"],"sources":["/Users/johnberetty/node_modules/localtunnel/lib/HeaderHostTransformer.js"],"sourcesContent":["const { Transform } = require('stream');\n\nclass HeaderHostTransformer extends Transform {\n  constructor(opts = {}) {\n    super(opts);\n    this.host = opts.host || 'localhost';\n    this.replaced = false;\n  }\n\n  _transform(data, encoding, callback) {\n    callback(\n      null,\n      this.replaced // after replacing the first instance of the Host header we just become a regular passthrough\n        ? data\n        : data.toString().replace(/(\\r\\n[Hh]ost: )\\S+/, (match, $1) => {\n            this.replaced = true;\n            return $1 + this.host;\n          })\n    );\n  }\n}\n\nmodule.exports = HeaderHostTransformer;\n"],"mappings":"AAAA,MAAM;EAAEA;AAAF,IAAgBC,OAAO,CAAC,QAAD,CAA7B;;AAEA,MAAMC,qBAAN,SAAoCF,SAApC,CAA8C;EAC5CG,WAAW,GAAY;IAAA,IAAXC,IAAW,uEAAJ,EAAI;IACrB,MAAMA,IAAN;IACA,KAAKC,IAAL,GAAYD,IAAI,CAACC,IAAL,IAAa,WAAzB;IACA,KAAKC,QAAL,GAAgB,KAAhB;EACD;;EAEDC,UAAU,CAACC,IAAD,EAAOC,QAAP,EAAiBC,QAAjB,EAA2B;IACnCA,QAAQ,CACN,IADM,EAEN,KAAKJ,QAAL,CAAc;IAAd,EACIE,IADJ,GAEIA,IAAI,CAACG,QAAL,GAAgBC,OAAhB,CAAwB,oBAAxB,EAA8C,CAACC,KAAD,EAAQC,EAAR,KAAe;MAC3D,KAAKR,QAAL,GAAgB,IAAhB;MACA,OAAOQ,EAAE,GAAG,KAAKT,IAAjB;IACD,CAHD,CAJE,CAAR;EASD;;AAjB2C;;AAoB9CU,MAAM,CAACC,OAAP,GAAiBd,qBAAjB"},"metadata":{},"sourceType":"script"}