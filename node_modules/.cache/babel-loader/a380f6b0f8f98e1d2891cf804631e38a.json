{"ast":null,"code":"\"use strict\";\n\nvar hooks = require(\"./hooks\");\n\nvar asyncTasks = require(\"./async-tasks\");\n\nvar config = require(\"./config\");\n\nvar connectUtils = require(\"./connect-utils\");\n\nvar utils = require(\"./utils\");\n\nvar logger = require(\"./logger\");\n\nvar eachSeries = utils.eachSeries;\n\nvar _ = require(\"./lodash.custom\");\n\nvar EE = require(\"easy-extender\");\n/**\n * Required internal plugins.\n * Any of these can be overridden by deliberately\n * causing a name-clash.\n */\n\n\nvar defaultPlugins = {\n  logger: logger,\n  socket: require(\"./sockets\"),\n  \"file:watcher\": require(\"./file-watcher\"),\n  server: require(\"./server\"),\n  tunnel: require(\"./tunnel\"),\n  \"client:script\": require(\"browser-sync-client\"),\n  UI: require(\"browser-sync-ui\")\n};\n/**\n * @constructor\n */\n\nvar BrowserSync = function (emitter) {\n  var bs = this;\n  bs.cwd = process.cwd();\n  bs.active = false;\n  bs.paused = false;\n  bs.config = config;\n  bs.utils = utils;\n  bs.events = bs.emitter = emitter;\n  bs._userPlugins = [];\n  bs._reloadQueue = [];\n  bs._cleanupTasks = [];\n  bs._browserReload = false; // Plugin management\n\n  bs.pluginManager = new EE(defaultPlugins, hooks);\n};\n/**\n * Call a user-options provided callback\n * @param name\n */\n\n\nBrowserSync.prototype.callback = function (name) {\n  var bs = this;\n  var cb = bs.options.getIn([\"callbacks\", name]);\n\n  if (_.isFunction(cb)) {\n    cb.apply(bs.publicInstance, _.toArray(arguments).slice(1));\n  }\n};\n/**\n * @param {Map} options\n * @param {Function} cb\n * @returns {BrowserSync}\n */\n\n\nBrowserSync.prototype.init = function (options, cb) {\n  /**\n   * Safer access to `this`\n   * @type {BrowserSync}\n   */\n  var bs = this;\n  /**\n   * Set user-provided callback, or assign a noop\n   * @type {Function}\n   */\n\n  bs.cb = cb || utils.defaultCallback;\n  /**\n   * Verify provided config.\n   * Some options are not compatible and will cause us to\n   * end the process.\n   */\n\n  if (!utils.verifyConfig(options, bs.cb)) {\n    return;\n  }\n  /**\n   * Save a reference to the original options\n   * @type {Map}\n   * @private\n   */\n\n\n  bs._options = options;\n  /**\n   * Set additional options that depend on what the\n   * user may of provided\n   * @type {Map}\n   */\n\n  bs.options = options;\n  /**\n   * Kick off default plugins.\n   */\n\n  bs.pluginManager.init();\n  /**\n   * Create a base logger & debugger.\n   */\n\n  bs.logger = bs.pluginManager.get(\"logger\")(bs.events, bs);\n  bs.debugger = bs.logger.clone({\n    useLevelPrefixes: true\n  });\n  bs.debug = bs.debugger.debug;\n  /**\n   * Run each setup task in sequence\n   */\n\n  eachSeries(asyncTasks, taskRunner(bs), tasksComplete(bs));\n  return this;\n};\n/**\n * Run 1 setup task.\n * Each task is a pure function.\n * They can return options or instance properties to set,\n * but they cannot set them directly.\n * @param {BrowserSync} bs\n * @returns {Function}\n */\n\n\nfunction taskRunner(bs) {\n  return function (item, cb) {\n    bs.debug(\"-> {yellow:Starting Step: \" + item.step);\n    /**\n     * Execute the current task.\n     */\n\n    item.fn(bs, executeTask);\n\n    function executeTask(err, out) {\n      /**\n       * Exit early if any task returned an error.\n       */\n      if (err) {\n        return cb(err);\n      }\n      /**\n       * Act on return values (such as options to be set,\n       * or instance properties to be set\n       */\n\n\n      if (out) {\n        handleOut(bs, out);\n      }\n\n      bs.debug(\"+  {green:Step Complete: \" + item.step);\n      cb();\n    }\n  };\n}\n/**\n * @param bs\n * @param out\n */\n\n\nfunction handleOut(bs, out) {\n  /**\n   * Set a single/many option.\n   */\n  if (out.options) {\n    setOptions(bs, out.options);\n  }\n  /**\n   * Any options returned that require path access?\n   */\n\n\n  if (out.optionsIn) {\n    out.optionsIn.forEach(function (item) {\n      bs.setOptionIn(item.path, item.value);\n    });\n  }\n  /**\n   * Any instance properties returned?\n   */\n\n\n  if (out.instance) {\n    Object.keys(out.instance).forEach(function (key) {\n      bs[key] = out.instance[key];\n    });\n  }\n}\n/**\n * Update the options Map\n * @param bs\n * @param options\n */\n\n\nfunction setOptions(bs, options) {\n  /**\n   * If multiple options were set, act on the immutable map\n   * in an efficient way\n   */\n  if (Object.keys(options).length > 1) {\n    bs.setMany(function (item) {\n      Object.keys(options).forEach(function (key) {\n        item.set(key, options[key]);\n        return item;\n      });\n    });\n  } else {\n    Object.keys(options).forEach(function (key) {\n      bs.setOption(key, options[key]);\n    });\n  }\n}\n/**\n * At this point, ALL async tasks have completed\n * @param {BrowserSync} bs\n * @returns {Function}\n */\n\n\nfunction tasksComplete(bs) {\n  return function (err) {\n    if (err) {\n      bs.logger.setOnce(\"useLevelPrefixes\", true).error(err.message);\n    }\n    /**\n     * Set active flag\n     */\n\n\n    bs.active = true;\n    /**\n     * @deprecated\n     */\n\n    bs.events.emit(\"init\", bs);\n    /**\n     * This is no-longer needed as the Callback now only resolves\n     * when everything (including slow things, like the tunnel) is ready.\n     * It's here purely for backwards compatibility.\n     * @deprecated\n     */\n\n    bs.events.emit(\"service:running\", {\n      options: bs.options,\n      baseDir: bs.options.getIn([\"server\", \"baseDir\"]),\n      type: bs.options.get(\"mode\"),\n      port: bs.options.get(\"port\"),\n      url: bs.options.getIn([\"urls\", \"local\"]),\n      urls: bs.options.get(\"urls\").toJS(),\n      tunnel: bs.options.getIn([\"urls\", \"tunnel\"])\n    });\n    /**\n     * Call any option-provided callbacks\n     */\n\n    bs.callback(\"ready\", null, bs);\n    /**\n     * Finally, call the user-provided callback given as last arg\n     */\n\n    bs.cb(null, bs);\n  };\n}\n/**\n * @param module\n * @param opts\n * @param cb\n */\n\n\nBrowserSync.prototype.registerPlugin = function (module, opts, cb) {\n  var bs = this;\n  bs.pluginManager.registerPlugin(module, opts, cb);\n\n  if (module[\"plugin:name\"]) {\n    bs._userPlugins.push(module);\n  }\n};\n/**\n * Get a plugin by name\n * @param name\n */\n\n\nBrowserSync.prototype.getUserPlugin = function (name) {\n  var bs = this;\n  var items = bs.getUserPlugins(function (item) {\n    return item[\"plugin:name\"] === name;\n  });\n\n  if (items && items.length) {\n    return items[0];\n  }\n\n  return false;\n};\n/**\n * @param {Function} [filter]\n */\n\n\nBrowserSync.prototype.getUserPlugins = function (filter) {\n  var bs = this;\n\n  filter = filter || function () {\n    return true;\n  };\n  /**\n   * Transform Plugins option\n   */\n\n\n  bs.userPlugins = bs._userPlugins.filter(filter).map(function (plugin) {\n    return {\n      name: plugin[\"plugin:name\"],\n      active: plugin._enabled,\n      opts: bs.pluginManager.pluginOptions[plugin[\"plugin:name\"]]\n    };\n  });\n  return bs.userPlugins;\n};\n/**\n * Get middleware\n * @returns {*}\n */\n\n\nBrowserSync.prototype.getMiddleware = function (type) {\n  var types = {\n    connector: connectUtils.socketConnector(this.options)\n  };\n\n  if (type in types) {\n    return function (req, res) {\n      res.setHeader(\"Content-Type\", \"text/javascript\");\n      res.end(types[type]);\n    };\n  }\n};\n/**\n * Shortcut for pushing a file-serving middleware\n * onto the stack\n * @param {String} path\n * @param {{type: string, content: string}} props\n */\n\n\nvar _serveFileCount = 0;\n\nBrowserSync.prototype.serveFile = function (path, props) {\n  var bs = this;\n  var mode = bs.options.get(\"mode\");\n  var entry = {\n    handle: function (req, res) {\n      res.setHeader(\"Content-Type\", props.type);\n      res.end(props.content);\n    },\n    id: \"Browsersync - \" + _serveFileCount++,\n    route: path\n  };\n\n  bs._addMiddlewareToStack(entry);\n};\n/**\n * Add middlewares on the fly\n */\n\n\nBrowserSync.prototype._addMiddlewareToStack = function (entry) {\n  var bs = this;\n  /**\n   * additional middlewares are always appended -1,\n   * this is to allow the proxy middlewares to remain,\n   * and the directory index to remain in serveStatic/snippet modes\n   */\n\n  bs.app.stack.splice(bs.app.stack.length - 1, 0, entry);\n};\n\nvar _addMiddlewareCount = 0;\n\nBrowserSync.prototype.addMiddleware = function (route, handle, opts) {\n  var bs = this;\n\n  if (!bs.app) {\n    return;\n  }\n\n  opts = opts || {};\n\n  if (!opts.id) {\n    opts.id = \"bs-mw-\" + _addMiddlewareCount++;\n  }\n\n  if (route === \"*\") {\n    route = \"\";\n  }\n\n  var entry = {\n    id: opts.id,\n    route: route,\n    handle: handle\n  };\n\n  if (opts.override) {\n    entry.override = true;\n  }\n\n  bs.options = bs.options.update(\"middleware\", function (mw) {\n    if (bs.options.get(\"mode\") === \"proxy\") {\n      return mw.insert(mw.size - 1, entry);\n    }\n\n    return mw.concat(entry);\n  });\n  bs.resetMiddlewareStack();\n};\n/**\n * Remove middlewares on the fly\n * @param {String} id\n * @returns {Server}\n */\n\n\nBrowserSync.prototype.removeMiddleware = function (id) {\n  var bs = this;\n\n  if (!bs.app) {\n    return;\n  }\n\n  bs.options = bs.options.update(\"middleware\", function (mw) {\n    return mw.filter(function (mw) {\n      return mw.id !== id;\n    });\n  });\n  bs.resetMiddlewareStack();\n};\n/**\n * Middleware for socket connection (external usage)\n * @param opts\n * @returns {*}\n */\n\n\nBrowserSync.prototype.getSocketConnector = function (opts) {\n  var bs = this;\n  return function (req, res) {\n    res.setHeader(\"Content-Type\", \"text/javascript\");\n    res.end(bs.getExternalSocketConnector(opts));\n  };\n};\n/**\n * Socket connector as a string\n * @param {Object} opts\n * @returns {*}\n */\n\n\nBrowserSync.prototype.getExternalSocketConnector = function (opts) {\n  var bs = this;\n  return connectUtils.socketConnector(bs.options.withMutations(function (item) {\n    item.set(\"socket\", item.get(\"socket\").merge(opts));\n\n    if (!bs.options.getIn([\"proxy\", \"ws\"])) {\n      item.set(\"mode\", \"snippet\");\n    }\n  }));\n};\n/**\n * Callback helper\n * @param name\n */\n\n\nBrowserSync.prototype.getOption = function (name) {\n  this.debug(\"Getting option: {magenta:%s\", name);\n  return this.options.get(name);\n};\n/**\n * Callback helper\n * @param path\n */\n\n\nBrowserSync.prototype.getOptionIn = function (path) {\n  this.debug(\"Getting option via path: {magenta:%s\", path);\n  return this.options.getIn(path);\n};\n/**\n * @returns {BrowserSync.options}\n */\n\n\nBrowserSync.prototype.getOptions = function () {\n  return this.options;\n};\n/**\n * @returns {BrowserSync.options}\n */\n\n\nBrowserSync.prototype.getLogger = logger.getLogger;\n/**\n * @param {String} name\n * @param {*} value\n * @returns {BrowserSync.options|*}\n */\n\nBrowserSync.prototype.setOption = function (name, value, opts) {\n  var bs = this;\n  opts = opts || {};\n  bs.debug(\"Setting Option: {cyan:%s} - {magenta:%s\", name, value.toString());\n  bs.options = bs.options.set(name, value);\n\n  if (!opts.silent) {\n    bs.events.emit(\"options:set\", {\n      path: name,\n      value: value,\n      options: bs.options\n    });\n  }\n\n  return this.options;\n};\n/**\n * @param path\n * @param value\n * @param opts\n * @returns {Map|*|BrowserSync.options}\n */\n\n\nBrowserSync.prototype.setOptionIn = function (path, value, opts) {\n  var bs = this;\n  opts = opts || {};\n  bs.debug(\"Setting Option: {cyan:%s} - {magenta:%s\", path.join(\".\"), value.toString());\n  bs.options = bs.options.setIn(path, value);\n\n  if (!opts.silent) {\n    bs.events.emit(\"options:set\", {\n      path: path,\n      value: value,\n      options: bs.options\n    });\n  }\n\n  return bs.options;\n};\n/**\n * Set multiple options with mutations\n * @param fn\n * @param opts\n * @returns {Map|*}\n */\n\n\nBrowserSync.prototype.setMany = function (fn, opts) {\n  var bs = this;\n  opts = opts || {};\n  bs.debug(\"Setting multiple Options\");\n  bs.options = bs.options.withMutations(fn);\n\n  if (!opts.silent) {\n    bs.events.emit(\"options:set\", {\n      options: bs.options.toJS()\n    });\n  }\n\n  return this.options;\n};\n\nBrowserSync.prototype.addRewriteRule = function (rule) {\n  var bs = this;\n  bs.options = bs.options.update(\"rewriteRules\", function (rules) {\n    return rules.concat(rule);\n  });\n  bs.resetMiddlewareStack();\n};\n\nBrowserSync.prototype.removeRewriteRule = function (id) {\n  var bs = this;\n  bs.options = bs.options.update(\"rewriteRules\", function (rules) {\n    return rules.filter(function (rule) {\n      return rule.id !== id;\n    });\n  });\n  bs.resetMiddlewareStack();\n};\n\nBrowserSync.prototype.setRewriteRules = function (rules) {\n  var bs = this;\n  bs.options = bs.options.update(\"rewriteRules\", function (_) {\n    return rules;\n  });\n  bs.resetMiddlewareStack();\n};\n/**\n * Add a new rewrite rule to the stack\n * @param {Object} rule\n */\n\n\nBrowserSync.prototype.resetMiddlewareStack = function () {\n  var bs = this;\n\n  var middlewares = require(\"./server/utils\").getMiddlewares(bs, bs.options);\n\n  bs.app.stack = middlewares;\n};\n/**\n * @param fn\n */\n\n\nBrowserSync.prototype.registerCleanupTask = function (fn) {\n  this._cleanupTasks.push(fn);\n};\n/**\n * Instance Cleanup\n */\n\n\nBrowserSync.prototype.cleanup = function (cb) {\n  var bs = this;\n\n  if (!bs.active) {\n    return;\n  } // Remove all event listeners\n\n\n  if (bs.events) {\n    bs.debug(\"Removing event listeners...\");\n    bs.events.removeAllListeners();\n  } // Close any core file watchers\n\n\n  if (bs.watchers) {\n    Object.keys(bs.watchers).forEach(function (key) {\n      bs.watchers[key].watchers.forEach(function (watcher) {\n        watcher.close();\n      });\n    });\n  } // Run any additional clean up tasks\n\n\n  bs._cleanupTasks.forEach(function (fn) {\n    if (_.isFunction(fn)) {\n      fn(bs);\n    }\n  }); // Reset the flag\n\n\n  bs.debug(\"Setting {magenta:active: false\");\n  bs.active = false;\n  bs.paused = false;\n  bs.pluginManager.plugins = {};\n  bs.pluginManager.pluginOptions = {};\n  bs.pluginManager.defaultPlugins = defaultPlugins;\n  bs._userPlugins = [];\n  bs.userPlugins = [];\n  bs._reloadTimer = undefined;\n  bs._reloadQueue = [];\n  bs._cleanupTasks = [];\n\n  if (_.isFunction(cb)) {\n    cb(null, bs);\n  }\n};\n\nmodule.exports = BrowserSync;","map":{"version":3,"mappings":"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","names":["hooks","require","asyncTasks","config","connectUtils","utils","logger","eachSeries","_","EE","defaultPlugins","socket","server","tunnel","UI","BrowserSync","emitter","bs","cwd","process","active","paused","events","_userPlugins","_reloadQueue","_cleanupTasks","_browserReload","pluginManager","prototype","callback","name","cb","options","getIn","isFunction","apply","publicInstance","toArray","arguments","slice","init","defaultCallback","verifyConfig","_options","get","debugger","clone","useLevelPrefixes","debug","taskRunner","tasksComplete","item","step","fn","executeTask","err","out","handleOut","setOptions","optionsIn","forEach","setOptionIn","path","value","instance","Object","keys","key","length","setMany","set","setOption","setOnce","error","message","emit","baseDir","type","port","url","urls","toJS","registerPlugin","module","opts","push","getUserPlugin","items","getUserPlugins","filter","userPlugins","map","plugin","_enabled","pluginOptions","getMiddleware","types","connector","socketConnector","req","res","setHeader","end","_serveFileCount","serveFile","props","mode","entry","handle","content","id","route","_addMiddlewareToStack","app","stack","splice","_addMiddlewareCount","addMiddleware","override","update","mw","insert","size","concat","resetMiddlewareStack","removeMiddleware","getSocketConnector","getExternalSocketConnector","withMutations","merge","getOption","getOptionIn","getOptions","getLogger","toString","silent","join","setIn","addRewriteRule","rule","rules","removeRewriteRule","setRewriteRules","middlewares","getMiddlewares","registerCleanupTask","cleanup","removeAllListeners","watchers","watcher","close","plugins","_reloadTimer","undefined","exports"],"sources":["../lib/browser-sync.js"],"sourcesContent":[null]},"metadata":{},"sourceType":"script"}