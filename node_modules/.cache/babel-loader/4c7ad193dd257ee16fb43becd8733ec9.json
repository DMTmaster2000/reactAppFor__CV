{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar immutable_1 = require(\"immutable\");\n\nvar addToFilesOption_1 = require(\"./transforms/addToFilesOption\");\n\nvar addDefaultIgnorePatterns_1 = require(\"./transforms/addDefaultIgnorePatterns\");\n\nvar copyCLIIgnoreToWatchOptions_1 = require(\"./transforms/copyCLIIgnoreToWatchOptions\");\n\nvar handleExtensionsOption_1 = require(\"./transforms/handleExtensionsOption\");\n\nvar handleFilesOption_1 = require(\"./transforms/handleFilesOption\");\n\nvar handleGhostModeOption_1 = require(\"./transforms/handleGhostModeOption\");\n\nvar handlePortsOption_1 = require(\"./transforms/handlePortsOption\");\n\nvar handleProxyOption_1 = require(\"./transforms/handleProxyOption\");\n\nvar handleServerOption_1 = require(\"./transforms/handleServerOption\");\n\nvar appendServerIndexOption_1 = require(\"./transforms/appendServerIndexOption\");\n\nvar appendServerDirectoryOption_1 = require(\"./transforms/appendServerDirectoryOption\");\n\nvar addCwdToWatchOptions_1 = require(\"./transforms/addCwdToWatchOptions\");\n\nvar options_1 = require(\"../options\");\n\nvar handleHostOption_1 = require(\"./transforms/handleHostOption\");\n\nvar _ = require(\"../lodash.custom\");\n\nvar defaultConfig = require(\"../default-config\");\n\nvar immDefs = immutable_1.fromJS(defaultConfig);\n\nfunction merge(input) {\n  var merged = immDefs.mergeDeep(input);\n  var transforms = [addToFilesOption_1.addToFilesOption, addCwdToWatchOptions_1.addCwdToWatchOptions, addDefaultIgnorePatterns_1.addDefaultIgnorePatterns, copyCLIIgnoreToWatchOptions_1.copyCLIIgnoreToWatchOptions, handleServerOption_1.handleServerOption, appendServerIndexOption_1.appendServerIndexOption, appendServerDirectoryOption_1.appendServerDirectoryOption, handleProxyOption_1.handleProxyOption, handlePortsOption_1.handlePortsOption, handleHostOption_1.handleHostOption, handleGhostModeOption_1.handleGhostModeOption, handleFilesOption_1.handleFilesOption, handleExtensionsOption_1.handleExtensionsOption, options_1.setMode, options_1.setScheme, options_1.setStartPath, options_1.setProxyWs, options_1.setServerOpts, options_1.liftExtensionsOptionFromCli, options_1.setNamespace, options_1.fixSnippetIgnorePaths, options_1.fixSnippetIncludePaths, options_1.fixRewriteRules, options_1.setMiddleware, options_1.setOpen, options_1.setUiPort];\n  var output = transforms.reduce(function (acc, item) {\n    var current = acc[0],\n        currentErrors = acc[1];\n\n    var _a = item.call(null, current),\n        result = _a[0],\n        errors = _a[1];\n\n    return [result, currentErrors.concat(errors)];\n  }, [merged, []]);\n  return output;\n}\n\nexports.merge = merge;\n/**\n * @param string\n */\n\nfunction explodeFilesArg(string) {\n  return string.split(\",\").map(function (item) {\n    return item.trim();\n  });\n}\n\nexports.explodeFilesArg = explodeFilesArg;\n/**\n * @param value\n * @returns {{globs: Array, objs: Array}}\n */\n\nfunction makeFilesArg(value) {\n  var globs = [];\n  var objs = [];\n\n  if (_.isString(value)) {\n    globs = globs.concat(explodeFilesArg(value));\n  }\n\n  if (immutable_1.List.isList(value) && value.size) {\n    value.forEach(function (value) {\n      if (_.isString(value)) {\n        globs.push(value);\n      } else {\n        if (immutable_1.Map.isMap(value)) {\n          objs.push(value);\n        }\n      }\n    });\n  }\n\n  return {\n    globs: globs,\n    objs: objs\n  };\n}\n\nexports.makeFilesArg = makeFilesArg;\n\nfunction printErrors(errors) {\n  return errors.map(function (error) {\n    return [\"Error Type:    \" + error.type, \"Error Level:   \" + error.level, error.errors.map(function (item) {\n      return [\"Error Message: \" + item.error.message, item.meta ? item.meta().join(\"\\n\") : \"\"].filter(Boolean).join(\"\\n\");\n    })].join(\"\\n\");\n  }).join(\"\\n\\n\");\n}\n\nexports.printErrors = printErrors;","map":{"version":3,"mappings":"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","names":["_","require","defaultConfig","immDefs","immutable_1","merge","input","merged","mergeDeep","transforms","addToFilesOption_1","addCwdToWatchOptions_1","addDefaultIgnorePatterns_1","copyCLIIgnoreToWatchOptions_1","handleServerOption_1","appendServerIndexOption_1","appendServerDirectoryOption_1","handleProxyOption_1","handlePortsOption_1","handleHostOption_1","handleGhostModeOption_1","handleFilesOption_1","handleExtensionsOption_1","options_1","output","reduce","acc","item","currentErrors","result","errors","exports","explodeFilesArg","string","split","map","trim","makeFilesArg","value","globs","objs","isString","concat","isList","size","forEach","push","isMap","printErrors","error","type","level","message","meta","join","filter","Boolean"],"sources":["../../lib/cli/cli-options.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"script"}