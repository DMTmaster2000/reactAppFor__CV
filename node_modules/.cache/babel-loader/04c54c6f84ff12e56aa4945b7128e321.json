{"ast":null,"code":"\"use strict\";\n/**\n * $ browser-sync reload <options>\n *\n * This commands starts the Browsersync servers\n * & Optionally UI.\n *\n * @param opts\n * @returns {Function}\n */\n\nmodule.exports = function (opts) {\n  var flags = opts.cli.flags;\n\n  if (!flags.url) {\n    flags.url = \"http://localhost:\" + (flags.port || 3000);\n  }\n\n  var proto = require(\"../http-protocol\");\n\n  var scheme = flags.url.match(/^https/) ? \"https\" : \"http\";\n  var args = {\n    method: \"reload\"\n  };\n\n  if (flags.files) {\n    args.args = flags.files;\n  }\n\n  var url = proto.getUrl(args, flags.url);\n\n  if (scheme === \"https\") {\n    process.env.NODE_TLS_REJECT_UNAUTHORIZED = \"0\";\n  }\n\n  require(scheme).get(url, function (res) {\n    res.on(\"data\", function () {\n      if (res.statusCode === 200) {\n        opts.cb(null, res);\n      }\n    });\n  }).on(\"error\", function (err) {\n    if (err.code === \"ECONNREFUSED\") {\n      err.message = \"Browsersync not running at \" + flags.url;\n    }\n\n    return opts.cb(err);\n  });\n};","map":{"version":3,"mappings":"AAAA;AAEA;;;;;;;;;;AASAA,MAAM,CAACC,OAAP,GAAiB,UAASC,IAAT,EAAa;EAC1B,IAAIC,KAAK,GAAGD,IAAI,CAACE,GAAL,CAASD,KAArB;;EACA,IAAI,CAACA,KAAK,CAACE,GAAX,EAAgB;IACZF,KAAK,CAACE,GAAN,GAAY,uBAAuBF,KAAK,CAACG,IAAN,IAAc,IAArC,CAAZ;EACH;;EACD,IAAIC,KAAK,GAAGC,OAAO,CAAC,kBAAD,CAAnB;;EACA,IAAIC,MAAM,GAAGN,KAAK,CAACE,GAAN,CAAUK,KAAV,CAAgB,QAAhB,IAA4B,OAA5B,GAAsC,MAAnD;EACA,IAAIC,IAAI,GAAG;IAAEC,MAAM,EAAE;EAAV,CAAX;;EAEA,IAAIT,KAAK,CAACU,KAAV,EAAiB;IACbF,IAAI,CAACA,IAAL,GAAYR,KAAK,CAACU,KAAlB;EACH;;EAED,IAAIR,GAAG,GAAGE,KAAK,CAACO,MAAN,CAAaH,IAAb,EAAmBR,KAAK,CAACE,GAAzB,CAAV;;EAEA,IAAII,MAAM,KAAK,OAAf,EAAwB;IACpBM,OAAO,CAACC,GAAR,CAAYC,4BAAZ,GAA2C,GAA3C;EACH;;EAEDT,OAAO,CAACC,MAAD,CAAP,CACKS,GADL,CACSb,GADT,EACc,UAASc,GAAT,EAAY;IAClBA,GAAG,CAACC,EAAJ,CAAO,MAAP,EAAe;MACX,IAAID,GAAG,CAACE,UAAJ,KAAmB,GAAvB,EAA4B;QACxBnB,IAAI,CAACoB,EAAL,CAAQ,IAAR,EAAcH,GAAd;MACH;IACJ,CAJD;EAKH,CAPL,EAQKC,EARL,CAQQ,OARR,EAQiB,UAASG,GAAT,EAAY;IACrB,IAAIA,GAAG,CAACC,IAAJ,KAAa,cAAjB,EAAiC;MAC7BD,GAAG,CAACE,OAAJ,GAAc,gCAAgCtB,KAAK,CAACE,GAApD;IACH;;IACD,OAAOH,IAAI,CAACoB,EAAL,CAAQC,GAAR,CAAP;EACH,CAbL;AAcH,CAjCD","names":["module","exports","opts","flags","cli","url","port","proto","require","scheme","match","args","method","files","getUrl","process","env","NODE_TLS_REJECT_UNAUTHORIZED","get","res","on","statusCode","cb","err","code","message"],"sources":["../../lib/cli/command.reload.js"],"sourcesContent":[null]},"metadata":{},"sourceType":"script"}