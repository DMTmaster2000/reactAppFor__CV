{"ast":null,"code":"var Immutable = require(\"immutable\");\n\nvar url = require(\"url\");\n\nmodule.exports = {\n  /**\n   * The UI uses it's own server/port\n   * @param ui\n   * @param done\n   */\n  findAFreePort: function (ui, done) {\n    var port = ui.options.get(\"port\");\n    var listenHost = ui.options.get(\"listen\", \"localhost\");\n    ui.bs.utils.portscanner.findAPortNotInUse(port, port + 100, {\n      host: listenHost,\n      timeout: 1000\n    }, function (err, port) {\n      if (err) {\n        return done(err);\n      }\n\n      done(null, {\n        options: {\n          port: port\n        }\n      });\n    });\n  },\n\n  /**\n   * Default hooks do things like creating/joining JS files &\n   * building angular config\n   * @param ui\n   * @param done\n   */\n  initDefaultHooks: function (ui, done) {\n    var out = ui.pluginManager.hook(\"page\", ui);\n    done(null, {\n      instance: {\n        clientJs: ui.pluginManager.hook(\"client:js\", ui),\n        templates: ui.pluginManager.hook(\"templates\", ui.getInitialTemplates(), ui),\n        pagesConfig: out.pagesConfig,\n        pages: out.pagesObj,\n        pageMarkup: out.pageMarkup\n      }\n    });\n  },\n  setBsOptions: function (ui, done) {\n    done(null, {\n      options: {\n        bs: Immutable.Map({\n          mode: ui.bs.options.get(\"mode\"),\n          port: ui.bs.options.get(\"port\")\n        })\n      }\n    });\n  },\n\n  /**\n   * @param ui\n   * @param done\n   */\n  setUrlOptions: function (ui, done) {\n    var port = ui.options.get(\"port\");\n    var bsUrls = ui.bs.getOptionIn([\"urls\"]).toJS();\n    var listenHost = ui.bs.options.get(\"listen\", \"localhost\");\n    var urls = {\n      ui: \"http://\" + listenHost + \":\" + port\n    };\n\n    if (bsUrls.external) {\n      var externalListen = listenHost || url.parse(bsUrls.external).hostname;\n      urls[\"ui-external\"] = [\"http://\", externalListen, \":\", port].join(\"\");\n    }\n\n    done(null, {\n      options: {\n        urls: Immutable.fromJS(urls)\n      }\n    });\n  },\n\n  /**\n   * Simple static file server with some middlewares for custom\n   * scripts/routes.\n   * @param ui\n   * @param done\n   */\n  startServer: function (ui, done) {\n    var bs = ui.bs;\n    var port = ui.options.get(\"port\");\n    var listenHost = ui.options.get(\"listen\");\n    ui.logger.debug(\"Using port %s\", port);\n\n    var server = require(\"./server\")(ui, {\n      middleware: {\n        socket: bs.getMiddleware(\"socket-js\"),\n        connector: bs.getSocketConnector(bs.options.get(\"port\"), {\n          path: bs.options.getIn([\"socket\", \"path\"]),\n          namespace: ui.config.getIn([\"socket\", \"namespace\"])\n        })\n      }\n    });\n\n    require('server-destroy')(server.server);\n\n    bs.registerCleanupTask(function () {\n      if (server.server) {\n        server.server.destroy();\n      }\n\n      if (ui.servers) {\n        Object.keys(ui.servers).forEach(function (key) {\n          if (ui.servers[key].server) {\n            ui.servers[key].server.destroy();\n          }\n        });\n      }\n    });\n    done(null, {\n      instance: {\n        server: server.server.listen(port, listenHost),\n        app: server.app\n      }\n    });\n  },\n\n  /**\n   * Allow an API for adding/removing elements to clients\n   * @param ui\n   * @param done\n   */\n  addElementEvents: function (ui, done) {\n    var elems = ui.pluginManager.hook(\"elements\");\n    var bs = ui.bs;\n\n    if (!Object.keys(elems).length) {\n      return done();\n    }\n\n    ui.setOption(\"clientFiles\", Immutable.fromJS(elems));\n    done(null, {\n      instance: {\n        enableElement: require(\"./client-elements\").enable(ui.clients, ui, bs),\n        disableElement: require(\"./client-elements\").disable(ui.clients, ui, bs),\n        addElement: require(\"./client-elements\").addElement\n      }\n    });\n  },\n\n  /**\n   * Run default plugins\n   * @param ui\n   * @param done\n   */\n  registerPlugins: function (ui, done) {\n    Object.keys(ui.defaultPlugins).forEach(function (key) {\n      ui.pluginManager.get(key)(ui, ui.bs);\n    });\n    done();\n  },\n\n  /**\n   * The most important event is the initial connection where\n   * the options are received from the socket\n   * @param ui\n   * @param done\n   */\n  addOptionsEvent: function (ui, done) {\n    var bs = ui.bs;\n    ui.clients.on(\"connection\", function (client) {\n      client.emit(\"ui:connection\", ui.options.toJS());\n      ui.options.get(\"clientFiles\").map(function (item) {\n        if (item.get(\"active\")) {\n          ui.addElement(client, item.toJS());\n        }\n      });\n    });\n    ui.socket.on(\"connection\", function (client) {\n      client.emit(\"connection\", bs.getOptions().toJS());\n      client.emit(\"ui:connection\", ui.options.toJS());\n      client.on(\"ui:get:options\", function () {\n        client.emit(\"ui:receive:options\", {\n          bs: bs.getOptions().toJS(),\n          ui: ui.options.toJS()\n        });\n      }); // proxy client events\n\n      client.on(\"ui:client:proxy\", function (evt) {\n        ui.clients.emit(evt.event, evt.data);\n      });\n      client.on(\"ui\", function (data) {\n        ui.delegateEvent(data);\n      });\n    });\n    done();\n  }\n};","map":{"version":3,"names":["Immutable","require","url","module","exports","findAFreePort","ui","done","port","options","get","listenHost","bs","utils","portscanner","findAPortNotInUse","host","timeout","err","initDefaultHooks","out","pluginManager","hook","instance","clientJs","templates","getInitialTemplates","pagesConfig","pages","pagesObj","pageMarkup","setBsOptions","Map","mode","setUrlOptions","bsUrls","getOptionIn","toJS","urls","external","externalListen","parse","hostname","join","fromJS","startServer","logger","debug","server","middleware","socket","getMiddleware","connector","getSocketConnector","path","getIn","namespace","config","registerCleanupTask","destroy","servers","Object","keys","forEach","key","listen","app","addElementEvents","elems","length","setOption","enableElement","enable","clients","disableElement","disable","addElement","registerPlugins","defaultPlugins","addOptionsEvent","on","client","emit","map","item","getOptions","evt","event","data","delegateEvent"],"sources":["/Users/johnberetty/node_modules/browser-sync-ui/lib/async.js"],"sourcesContent":["var Immutable = require(\"immutable\");\nvar url = require(\"url\");\n\nmodule.exports = {\n    /**\n     * The UI uses it's own server/port\n     * @param ui\n     * @param done\n     */\n    findAFreePort: function (ui, done) {\n        var port = ui.options.get(\"port\");\n        var listenHost = ui.options.get(\"listen\", \"localhost\");\n        ui.bs.utils.portscanner.findAPortNotInUse(port, port + 100, {\n            host: listenHost,\n            timeout: 1000\n        }, function (err, port) {\n            if (err) {\n                return done(err);\n            }\n            done(null, {\n                options: {\n                    port: port\n                }\n            });\n        });\n    },\n    /**\n     * Default hooks do things like creating/joining JS files &\n     * building angular config\n     * @param ui\n     * @param done\n     */\n    initDefaultHooks: function (ui, done) {\n\n        var out = ui.pluginManager.hook(\"page\", ui);\n\n        done(null, {\n            instance: {\n                clientJs:    ui.pluginManager.hook(\"client:js\", ui),\n                templates:   ui.pluginManager.hook(\"templates\", ui.getInitialTemplates(), ui),\n                pagesConfig: out.pagesConfig,\n                pages:       out.pagesObj,\n                pageMarkup:  out.pageMarkup\n            }\n        });\n    },\n    setBsOptions: function (ui, done) {\n        done(null, {\n            options: {\n                bs: Immutable.Map({\n                    mode: ui.bs.options.get(\"mode\"),\n                    port: ui.bs.options.get(\"port\")\n                })\n            }\n        });\n    },\n    /**\n     * @param ui\n     * @param done\n     */\n    setUrlOptions: function (ui, done) {\n\n        var port        = ui.options.get(\"port\");\n        var bsUrls      = ui.bs.getOptionIn([\"urls\"]).toJS();\n        var listenHost  = ui.bs.options.get(\"listen\", \"localhost\");\n\n        var urls        = {\n            ui: \"http://\" + listenHost + \":\" + port\n        };\n\n        if (bsUrls.external) {\n            var externalListen = listenHost || url.parse(bsUrls.external).hostname;\n            urls[\"ui-external\"] = [\"http://\", externalListen, \":\", port].join(\"\");\n        }\n\n        done(null, {\n            options: {\n                urls: Immutable.fromJS(urls)\n            }\n        });\n    },\n    /**\n     * Simple static file server with some middlewares for custom\n     * scripts/routes.\n     * @param ui\n     * @param done\n     */\n    startServer: function (ui, done) {\n\n        var bs          = ui.bs;\n        var port        = ui.options.get(\"port\");\n        var listenHost  = ui.options.get(\"listen\");\n\n        ui.logger.debug(\"Using port %s\", port);\n\n        var server = require(\"./server\")(ui, {\n            middleware: {\n                socket: bs.getMiddleware(\"socket-js\"),\n                connector: bs.getSocketConnector(bs.options.get(\"port\"), {\n                    path: bs.options.getIn([\"socket\", \"path\"]),\n                    namespace: ui.config.getIn([\"socket\", \"namespace\"])\n                })\n            }\n        });\n\n        require('server-destroy')(server.server);\n\n        bs.registerCleanupTask(function () {\n            if (server.server) {\n                server.server.destroy();\n            }\n            if (ui.servers) {\n                Object.keys(ui.servers).forEach(function (key) {\n                    if (ui.servers[key].server) {\n                        ui.servers[key].server.destroy();\n                    }\n                });\n            }\n        });\n\n        done(null, {\n            instance: {\n                server: server.server.listen(port, listenHost),\n                app: server.app\n            }\n        });\n\n    },\n    /**\n     * Allow an API for adding/removing elements to clients\n     * @param ui\n     * @param done\n     */\n    addElementEvents: function (ui, done) {\n\n        var elems = ui.pluginManager.hook(\"elements\");\n        var bs    = ui.bs;\n\n        if (!Object.keys(elems).length) {\n            return done();\n        }\n\n        ui.setOption(\"clientFiles\", Immutable.fromJS(elems));\n\n        done(null, {\n            instance: {\n                enableElement:  require(\"./client-elements\").enable(ui.clients, ui, bs),\n                disableElement: require(\"./client-elements\").disable(ui.clients, ui, bs),\n                addElement:     require(\"./client-elements\").addElement\n            }\n        });\n    },\n    /**\n     * Run default plugins\n     * @param ui\n     * @param done\n     */\n    registerPlugins: function (ui, done) {\n        Object.keys(ui.defaultPlugins).forEach(function (key) {\n            ui.pluginManager.get(key)(ui, ui.bs);\n        });\n        done();\n    },\n    /**\n     * The most important event is the initial connection where\n     * the options are received from the socket\n     * @param ui\n     * @param done\n     */\n    addOptionsEvent: function (ui, done) {\n\n        var bs = ui.bs;\n\n        ui.clients.on(\"connection\", function (client) {\n\n            client.emit(\"ui:connection\", ui.options.toJS());\n\n            ui.options.get(\"clientFiles\").map(function (item) {\n                if (item.get(\"active\")) {\n                    ui.addElement(client, item.toJS());\n                }\n            });\n        });\n\n        ui.socket.on(\"connection\", function (client) {\n\n            client.emit(\"connection\", bs.getOptions().toJS());\n\n            client.emit(\"ui:connection\", ui.options.toJS());\n\n            client.on(\"ui:get:options\", function () {\n                client.emit(\"ui:receive:options\", {\n                    bs: bs.getOptions().toJS(),\n                    ui: ui.options.toJS()\n                });\n            });\n\n            // proxy client events\n            client.on(\"ui:client:proxy\", function (evt) {\n                ui.clients.emit(evt.event, evt.data);\n            });\n\n            client.on(\"ui\", function (data) {\n                ui.delegateEvent(data);\n            });\n        });\n        done();\n    }\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}